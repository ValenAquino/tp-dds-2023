{{#partial "principal" }}
    <div class="d-flex justify-content-between align-items-center mb-4" style="margin-left: 1%;">
        <h1 class="ms-4">Comunidades</h1>
        <div class="d-flex p-3" style="margin-right: 1.3%;">
            <a class="btn-agregar" href="/comunidades" role="button">
                Agregar comunidad
            </a>
        </div>
    </div>

    <div class="container shadow-sm">
        <div class="row p-3 border-bottom border-1">
            <div class="col-4">
                <span class="fs-5 fw-semibold">Nombre</span>
            </div>
            <div class="col">
                <span class="fs-5 fw-semibold">Incidentes</span>
            </div>
            <div class="col">
                <span class="fs-5 fw-semibold">Miembros</span>
            </div>
            <div class="col">
                <span class="fs-5 fw-semibold">Acciones</span>
            </div>
        </div>
        {{#each comunidades}}
            <div class="row p-3 border-bottom border-1">
                <div class="col-4 fw-semibold">{{nombre}}</div>
                <div class="col">{{incidentesAbiertos.length}}</div>
                <div class="col">{{miembros.length}}</div>
                <div class="col">
                    <a href="/comunidades/{{id}}/editar"><i title="Editar"
                                                                 class="fa-solid fa-pencil mr-1"></i></a>
                    <form class="d-inline" action="/comunidades/eliminar" method="POST"
                          onsubmit="return confirm('¿Está seguro que desea eliminar esta comunidad?');">
                        <input type="hidden" name="id" value="{{id}}">

                        <button type="submit" style="background:none;border:none;padding:0;">
                            <i title="Eliminar" class="fa-regular fa-trash-can red-icon"></i>
                        </button>
                    </form>
                </div>
            </div>
        {{/each}}
    </div>
{{/partial}}

{{> layouts/logged.html.hbs }}
